---
title: "Final project EDA"
author: "Kerinna Good and Josh Wagner"
format: pdf
---

## Read in data

``` {r, message = F, warning = F}
library(tidyverse)
library(tidymodels)

acquisitions <- read_csv("data/acquisitions.csv")
all_cetaceans <- read_csv("data/allCetaceanData.csv")
survival_rates <- read_csv("data/survivalRates.csv")
```

Data from [The Pudding](https://data.world/the-pudding/cetaceans). 

```{r}
all_cetaceans2 <- all_cetaceans %>%
  transform(deathyear = as.numeric(substr(statusDate, 1, 4))) %>%
  mutate(longevity = deathyear - birthYear) %>%
  rename(transferdate = transferDate) %>%
  rename(transfertype = transfer) %>%
  rename(deathlocation = currently) %>%
  mutate(transfer = ifelse(transfers == "NA", "0", "1")) %>%
  mutate(originyear = as.numeric(substr(originDate, 1, 4))) %>%
  mutate(captivity = (deathyear - originyear) / longevity) %>%
  subset(select = -c(id, name, mother, father, region, COD, ...1, entryDate, 
                     notes))

all_cetaceans2["transfer"][is.na(all_cetaceans2["transfer"])] <- 0

colnames(all_cetaceans2)
cetacean_deaths <- all_cetaceans2[, c(1, 2, 3, 4, 6, 18, 7, 5, 9, 10, 11, 
                                       15, 16, 19, 17, 8, 13, 14, 12)]

head(cetacean_deaths)
```



## Data dictionary for `cetacean_deaths` data set

| Variable        | Class     | Description                                                      	|
|---------------- |---------- |------------------------------------------------------------------	|
| species         | character | Species of animal (whale or dolphin)                             	|
| sex             | character | Sex of animal                                                    	|
| accuracy        | character | Accuracy of an animals' birthdate                               	|
| birthYear       | integer   | Year of birth                                                   	|
| origindate      | integer   | Date that an animal was born into captivity, rescued, or captured |
| originyear      | integer   | Year that an animal was born into captivity, rescued, or captured |
| originlocation	| character	| Location that an animal originated from                          	|
| acquisition     | character | Method through which an animal was brought into captivity       	|
| deathlocation   | character	| Location of animal at death                                      	|
| statusDate      | integer   | Date that an animal died                                         	|
| cod             | character | Reported cause of death                                         	|
| deathyear       | integer   | Year that an animal died                                         	|
| longevity       | integer   | Animal's age at death                                             |
| captivity       | integer   | Percentage of animal's life lived in captivity                    |
| transfer        | binary  	| Indicator variable for known transfers between facilities       	|
| transfers       | character	| List of facilities an animal was transferred between             	|
| transferdate    | integer   | Date of transfer into the US; NA for animals born in the US      	|
| transfertype    | character | Whether an animal was transferred within the US or outside the US |


